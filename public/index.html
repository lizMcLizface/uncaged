<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.svg" type="image/svg+xml" />
    <!-- <link rel="icon" href="%PUBLIC_URL%/favicon.ico" /> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, maximum-scale=1, shrink-to-fit=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="screen-orientation" content="landscape" />
    <meta name="theme-color" content="#2563eb" />
    <meta
      name="description"
      content="unCAGE - A guitar fretboard visualization tool for exploring scales and chords."
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.svg" />
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script> -->
<!-- <div id="root"></div> -->
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>unCAGED</title>
  </head>
  <body>  <style>
      .tab {
        position: relative;
        width: 60px;
        transition: width 0.3s;
        z-index: 1000;
        background: #fff;
        box-shadow: 2px 0 8px rgba(0,0,0,0.1);
        overflow: visible;
      }
      .tab.expanded {
        width: 400px;
        box-shadow: 2px 0 16px rgba(0,0,0,0.2);
      }
      .tab button.tablinks {
        display: block;
        width: 100%;
        text-align: left;
        padding: 8px 12px;
        border: none;
        background: none;
        outline: none;
        cursor: pointer;
        transition: background 0.2s;
        font-size: 14px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        min-height: 48px;
        display: flex;
        align-items: center;
      }
      .tab:not(.expanded) button.tablinks .full-label {
        display: none;
      }
      .tab:not(.expanded) button.tablinks .short-label {
        display: inline;
      }
      .tab.expanded button.tablinks .full-label {
        display: inline;
      }
      .tab.expanded button.tablinks .short-label {
        display: none;
      }
      .tab button.tablinks.active {
        background: #e3e3e3;
      }
      .tab {
        /* Make sure it overlays other content when expanded */
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        border-right: 1px solid #ccc;
      }
      .tab-icon {
        width: 32px;
        height: 32px;
        display: inline-block;
        vertical-align: middle;
        flex-shrink: 0;
      }
      .tab button.tablinks .full-label {
        margin-left: 8px;
        line-height: 32px;
      }
      
      /* Help dropdown styles */
      .help-dropdown-container {
        position: relative;
        display: inline-block;
      }
      
      .help-dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        min-width: 1200px;
        max-width: 1200px;
        background: white;
        border: 1px solid #ccc;
        border-radius: 8px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.2);
        z-index: 10000;
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.3s ease;
        padding: 20px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        pointer-events: none;
      }
      
      .help-dropdown-container:hover .help-dropdown {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
        pointer-events: auto;
      }
      
      .help-dropdown h4 {
        margin: 0 0 15px 0;
        color: #333;
        border-bottom: 2px solid #2563eb;
        padding-bottom: 10px;
      }
      
      .help-section {
        margin-bottom: 20px;
      }
      
      .help-section h5 {
        margin: 0 0 8px 0;
        color: #2563eb;
        font-size: 16px;
      }
      
      .help-section p {
        margin: 0 0 8px 0;
        color: #666;
        line-height: 1.5;
      }
      
      .help-section ul {
        margin: 0;
        padding-left: 20px;
        color: #666;
      }
      
      .help-section li {
        margin-bottom: 4px;
      }
      
      .help-button {
        cursor: pointer;
        transition: background-color 0.2s;
        border-radius: 4px;
        padding: 4px 8px;
      }
      
      .help-button:hover {
        background-color: #f0f0f0;
      }
      
        #scaleControlsContainer table,
        #placeholderContent table {
          width: 100% !important;
          margin: 5px 0 !important;
        }

        #scaleControlsContainer td,
        #placeholderContent td {
          padding: 2px 3px !important;
        }

        /* Fretboard controls mobile layout */
        .fretboard-controls {
          flex-wrap: wrap !important;
          gap: 3px !important;
          margin: 5px 0 !important;
          justify-content: center !important;
        }

        .fretboard-controls button {
          min-width: 44px !important; /* Apple's recommended 44px minimum touch target */
          min-height: 44px !important;
          font-size: 10px !important;
          padding: 3px !important;
          margin: 1px !important;
          touch-action: manipulation; /* Prevent zoom on double-tap */
          -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1); /* Subtle tap highlight */
        }

        /* Force chord grid first, then scale controls below it */
        #chordButtonGridContainer {
          order: 1 !important;
          width: 100% !important;
          max-width: 600px !important; /* Set reasonable maximum width for all screens */
          margin: 5px auto !important; /* Center the grid */
          padding: 0 !important; /* Remove padding */
          flex-shrink: 1 !important;
          overflow: hidden !important; /* Prevent content from overflowing container */
        }

        #chordButtonGridContainer table {
          width: 100% !important;
          max-width: 100% !important; /* Ensure table doesn't exceed container width */
          margin: 0 !important; /* Remove table margin */
          border-spacing: 0 !important; /* Remove cell spacing */
          border-collapse: collapse !important; /* Collapse borders */
          table-layout: fixed !important; /* Force table to respect width constraints */
        }

        #chordButtonGridContainer td,
        #chordButtonGridContainer th {
          width: auto !important;
          min-width: 20px !important;
          height: 20px !important;
          font-size: 8px !important;
          padding: 1px !important;
          margin: 0 !important; /* Remove cell margin */
          border: none !important; /* Remove borders that add space */
        }

        /* Compact chord grid label */
        #chordButtonGridContainer h3,
        #chordButtonGridContainer h4,
        #chordButtonGridContainer .grid-label {
          margin: 2px 0 !important; /* Minimal margin for labels */
          padding: 0 !important;
          font-size: 12px !important;
          line-height: 1.2 !important;
        }
        
        #scaleControlsContainer,
        #placeholderContent {
          order: 2 !important;
          width: 100% !important;
          max-width: 100% !important;
          margin: 5px 0 !important; /* Reduced margin to match chord grid */
          flex-shrink: 1 !important;
        }
        /* Better touch targets for chord grid */
        #chordButtonGridContainer td,
        #chordButtonGridContainer th {
          min-width: 30px !important;
          min-height: 30px !important;
          touch-action: manipulation;
          -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        /* Better touch targets for scale controls */
        #scaleControlsContainer td,
        #placeholderContent td {
          min-height: 32px !important;
          touch-action: manipulation;
          -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }


      /* Mobile styles - Force landscape orientation and optimize layout */
      @media screen and (max-width: 768px) {
        /* Force landscape orientation */
        @media screen and (orientation: portrait) {
          html {
            transform: rotate(-90deg);
            transform-origin: left top;
            width: 100vh;
            height: 100vw;
            overflow-x: hidden;
            overflow-x: hidden;
            position: absolute;
            top: 100%;
            left: 0;
          }
          
          body {
            width: 100vh;
            height: 100vw;
            overflow-x: hidden;
          }
          
          .main-content {
            height: 100%;
            width: 100%;
            overflow-y: auto;
          }
        }

        /* Mobile layout adjustments */
        body {
          font-size: 14px;
          margin: 0;
          padding: 0;
        }

        .main-content {
          margin-left: 0;
        }

        /* Compact header for mobile */
        .selectionContainer {
          max-height: 50px !important;
          padding: 2px;
          display: flex !important;
          flex-direction: row !important;
          flex-wrap: nowrap !important;
          align-items: center !important;
          justify-content: space-between !important;
        }

        .selectionContainer .tableCell {
          margin-bottom: 0 !important;
          padding: 2px !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
        }

        .selectionContainer .tableCell h3 {
          font-size: 14px !important;
          margin: 0 !important;
          white-space: nowrap !important;
        }

        /* Compress the unCAGED title and help section */
        .selectionContainer .tableCell:first-child {
          width: 20% !important;
          min-width: 60px !important;
        }

        .selectionContainer .tableCell:nth-child(2) {
          width: 15% !important;
          min-width: 40px !important;
        }

        .selectionContainer .tableCell:last-child {
          width: 65% !important;
          text-align: left !important;
        }

        .selectionContainer .tableCell:last-child p {
          font-size: 11px !important;
          margin: 0 !important;
          display: inline !important;
        }

        #currentScaleNode {
          font-size: 12px !important;
          font-weight: bold !important;
        }

        /* Help dropdown adjustments for mobile */
        .help-dropdown {
          min-width: 90vw !important;
          max-width: 90vw !important;
          left: -80vw;
          font-size: 12px;
          padding: 15px;
        }

        .help-dropdown h4 {
          font-size: 16px;
        }

        .help-dropdown h5 {
          font-size: 14px;
        }

        .help-dropdown p {
          font-size: 12px;
          line-height: 1.4;
        }

        /* Mobile-specific layout for fretboard content */
        #fretNotPlaceholder {
          display: flex;
          flex-direction: column;
          gap: 10px;
          padding: 5px;
          height: calc(100vh - 60px); /* Reserve space for header */
          overflow-y: auto;
        }

        /* Fretboard goes below chord grid and scale controls */
        .fretboard {
          order: 3 !important;
          width: 100% !important;
          margin: 5px 0 !important;
          flex-shrink: 0 !important;
          height: 200px !important; /* Fixed height for fretboard */
        }

        .fretboard .neck-container {
          height: 120px !important;
          margin: 0 5px !important;
        }

        .fretboard .note-marker {
          width: 16px !important;
          height: 16px !important;
          font-size: 8px !important;
        }

        .fretboard .position-marker {
          width: 8px !important;
          height: 8px !important;
        }

        .fretboard .fret-wire {
          width: 1px !important;
        }

        /* Force chord grid first, then scale controls below it */
        #chordButtonGridContainer {
          order: 1 !important;
          width: 100% !important;
          max-width: 300px !important; /* Limit maximum width on small screens */
          margin: 5px auto !important; /* Center the grid and reduced margin */
          padding: 0 !important; /* Remove padding */
          flex-shrink: 1 !important;
          overflow: hidden !important; /* Prevent content from overflowing container */
        }

        #chordButtonGridContainer table {
          width: 100% !important;
          max-width: 100% !important; /* Ensure table doesn't exceed container width */
          margin: 0 !important; /* Remove table margin */
          border-spacing: 0 !important; /* Remove cell spacing */
          border-collapse: collapse !important; /* Collapse borders */
          table-layout: fixed !important; /* Force table to respect width constraints */
        }

        #chordButtonGridContainer td,
        #chordButtonGridContainer th {
          width: auto !important;
          min-width: 10px !important;
          max-width: 10px !important;
          height: 20px !important;
          font-size: 8px !important;
          padding: 1px !important;
          margin: 0 !important; /* Remove cell margin */
          border: none !important; /* Remove borders that add space */
        }

        /* Compact chord grid label */
        #chordButtonGridContainer h3,
        #chordButtonGridContainer h4,
        #chordButtonGridContainer .grid-label {
          margin: 2px 0 !important; /* Minimal margin for labels */
          padding: 0 !important;
          font-size: 12px !important;
          line-height: 1.2 !important;
        }

        /* Scale controls go below chord grid */
        #scaleControlsContainer,
        #placeholderContent {
          order: 2 !important;
          width: 100% !important;
          flex-shrink: 1 !important;
          margin: 5px 0 !important; /* Reduced margin */
          padding: 0 !important; /* Remove padding */
        }

        #scaleControlsContainer table,
        #placeholderContent table {
          width: 100% !important;
          margin: 0 !important; /* Remove table margin */
          border-spacing: 0 !important; /* Remove cell spacing */
          border-collapse: collapse !important; /* Collapse borders */
        }

        #scaleControlsContainer td,
        #placeholderContent td {
          padding: 2px 3px !important;
          margin: 0 !important; /* Remove cell margin */
          border: none !important; /* Remove borders that add space */
        }

        /* Compact scale control labels */
        #scaleControlsContainer h3,
        #scaleControlsContainer h4,
        #placeholderContent h3,
        #placeholderContent h4 {
          margin: 2px 0 !important; /* Minimal margin for labels */
          padding: 0 !important;
          font-size: 12px !important;
          line-height: 1.2 !important;
        }

        /* Fretboard controls mobile layout */
        .fretboard-controls {
          flex-wrap: wrap !important;
          gap: 3px !important;
          margin: 5px 0 !important;
          justify-content: center !important;
        }

        .fretboard-controls button {
          min-width: 44px !important; /* Apple's recommended 44px minimum touch target */
          min-height: 44px !important;
          font-size: 10px !important;
          padding: 3px !important;
          margin: 1px !important;
          touch-action: manipulation; /* Prevent zoom on double-tap */
          -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1); /* Subtle tap highlight */
        }

        /* Better touch targets for chord grid */
        #chordButtonGridContainer td,
        #chordButtonGridContainer th {
          min-width: 30px !important;
          min-height: 30px !important;
          touch-action: manipulation;
          -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        /* Better touch targets for scale controls */
        #scaleControlsContainer td,
        #placeholderContent td {
          min-height: 32px !important;
          touch-action: manipulation;
          -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        /* Prevent text selection on touch interface elements */
        .fretboard-controls,
        #chordButtonGridContainer,
        #scaleControlsContainer,
        #placeholderContent {
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        /* Cross reference tables mobile adjustments */
        .cross-reference-container {
          order: 4;
          overflow-x: auto;
          margin: 15px 0;
        }

        .cross-reference-container table {
          min-width: 300px;
          font-size: 10px !important;
        }
      }

      /* Tablet landscape optimization - Match portrait layout order */
      @media screen and (min-width: 769px) and (max-width: 1024px) and (orientation: landscape) {


        .help-dropdown {
          min-width: 80vw !important;
          max-width: 80vw !important;
          left: -70vw;
        }

        #fretNotPlaceholder {
          display: flex;
          flex-direction: column;
          gap: 20px;
        }

        /* Force chord grid first, then scale controls, then fretboard for consistency */
        #chordButtonGridContainer {
          order: 1 !important;
          width: 100% !important;
          max-width: 500px !important; /* Limit maximum width on tablet screens */
          margin: 5px auto !important; /* Center the grid and reduced margin */
          padding: 0 !important; /* Remove padding */
          flex-shrink: 1 !important;
          overflow: hidden !important; /* Prevent content from overflowing container */
        }

        #chordButtonGridContainer table {
          width: 100% !important;
          max-width: 100% !important; /* Ensure table doesn't exceed container width */
          margin: 0 !important; /* Remove table margin */
          border-spacing: 0 !important; /* Remove cell spacing */
          border-collapse: collapse !important; /* Collapse borders */
          table-layout: fixed !important; /* Force table to respect width constraints */
        }

        #chordButtonGridContainer td,
        #chordButtonGridContainer th {
          width: auto !important;
          min-width: 25px !important;
          height: 25px !important;
          font-size: 10px !important;
          padding: 2px !important;
          margin: 0 !important; /* Remove cell margin */
          border: none !important; /* Remove borders that add space */
        }

        /* Compact chord grid label for tablet */
        #chordButtonGridContainer h3,
        #chordButtonGridContainer h4,
        #chordButtonGridContainer .grid-label {
          margin: 3px 0 !important; /* Minimal margin for labels */
          padding: 0 !important;
          font-size: 14px !important;
          line-height: 1.2 !important;
        }

        #scaleControlsContainer,
        #placeholderContent {
          order: 2 !important;
          width: 100% !important;
          flex-shrink: 1 !important;
          margin: 5px 0 !important; /* Reduced margin */
          padding: 0 !important; /* Remove padding */
        }

        #scaleControlsContainer table,
        #placeholderContent table {
          width: 100% !important;
          font-size: 12px !important;
          margin: 0 !important; /* Remove table margin */
          border-spacing: 0 !important; /* Remove cell spacing */
          border-collapse: collapse !important; /* Collapse borders */
        }

        #scaleControlsContainer td,
        #placeholderContent td {
          padding: 3px 4px !important;
          font-size: 11px !important;
          margin: 0 !important; /* Remove cell margin */
          border: none !important; /* Remove borders that add space */
        }

        /* Compact scale control labels for tablet */
        #scaleControlsContainer h3,
        #scaleControlsContainer h4,
        #placeholderContent h3,
        #placeholderContent h4 {
          margin: 3px 0 !important; /* Minimal margin for labels */
          padding: 0 !important;
          font-size: 14px !important;
          line-height: 1.2 !important;
        }

        .fretboard {
          order: 3 !important;
          width: 100% !important;
          margin: 5px 0 !important;
          flex-shrink: 0 !important;
          height: 250px !important; /* Slightly larger for landscape */
        }

        .fretboard .neck-container {
          height: 150px !important;
          margin: 0 10px !important;
        }

        .fretboard .note-marker {
          width: 20px !important;
          height: 20px !important;
          font-size: 10px !important;
        }

        .fretboard .position-marker {
          width: 10px !important;
          height: 10px !important;
        }
      }
    </style>
    <!-- <div class="tab" id="mainTabBar"
         onmouseenter="this.classList.add('expanded')"
         onmouseleave="this.classList.remove('expanded')">
         
         <button class="tablinks active" onclick="openCity(event, 'fretNotTab')" id="defaultOpen">
        <span class="short-label">
          F
        </span>
        <span class="full-label">Fret Not</span>
      </button>
      
    </div>
    <style>
      .main-content {
        margin-left: 60px;
      }
    </style> -->
    <div class="main-content">
     
      <div class="selectionContainer" width="100%" style="max-height:120px;">
        <span style="width:30%;text-align: left;" class="tableCell">
          <h1>unCAGED</h1>
        </span>
        <span style="width:10%;text-align: left;" class="tableCell" id="helpButton">
          <div class="help-dropdown-container">
            <div class="help-button" style="display: flex; justify-content: center; align-items: center; height: 10%;">
              <p>Help</p>
            </div>
            <div class="help-dropdown">
              <h4>unCAGED help</h4>
              
              <div class="help-section">
                <h5>Getting Started</h5>
                <p>Welcome to unCAGED - a comprehensive guitar fretboard visualization tool!</p>
                <p>Explore scales, chords, and their relationships on an interactive guitar fretboard</p>
                <p>Perfect for understanding music theory, chord progressions, and scale patterns</p>
              </div>
              
              <div class="help-section">
                <h5>Fretboard Controls</h5>
                <p><strong>Scale Button:</strong> Shows the currently selected scale with color-coded notes</p>
                <p><strong>Roman Numerals (I-VII):</strong> Display diatonic chords built from each scale degree</p>
                <p><strong>Chord Type Dropdown:</strong> Switch between triads and seventh chords</p>
                <p><strong>Clear/Show All Notes:</strong> Reset the fretboard or show all chromatic notes</p>
              </div>
              
              <div class="help-section">
                <h5>Scale Selection</h5>
                <p><strong>Root Note Table:</strong> Select one or multiple root notes (C, C#, D, etc.)</p>
                <p><strong>Scale Mode Table:</strong> Choose from various scales (Major, Dorian, Phrygian, etc.)</p>
                <p><strong>Toggle Switch:</strong> Switch between exclusive mode (one selection) and multiple selection</p>
                <p><strong>Keyboard Shortcuts:</strong> Use ',' and '.' to cycle root notes, 'n' and 'm' for scale modes</p>
              </div>
              
              <div class="help-section">
                <h5>Chord Grid</h5>
                <p>Interactive grid showing chord compatibility with the current scale:</p>
                <p><strong>Blue:</strong> All chord notes in scale - <strong>Purple:</strong> Missing one note</p>
                <p><strong>Orange:</strong> Partial match - <strong>Grey:</strong> Poor compatibility</p>
                <p><strong>Hover:</strong> Preview chord temporarily - <strong>Click:</strong> Lock chord display</p>
              </div>
              
              <div class="help-section">
                <h5>Advanced Features</h5>
                <p><strong>Scale Context:</strong> When displaying chords, grey dots show scale notes for reference</p>
                <p><strong>Chord Patterns:</strong> Thick lines connect chord tones to show fingering patterns</p>
                <p><strong>Multiple Selection:</strong> Compare different scales and root notes side by side</p>
                <p><strong>Real-time Updates:</strong> All visualizations update instantly when selections change</p>
              </div>
              
            </div>
          </div>
        </span>
        <span style="width:30%;text-align: left;" class="tableCell">
            <div style="display: flex; flex-wrap: wrap; align-items: center; gap: 12px;">
              <div style="display: flex; align-items: center; gap: 8px; min-width: 180px;">
                <p style="margin: 0; font-weight: bold; color: #fff;">Root:</p>
                <button id="prevRootBtn" style="background: linear-gradient(145deg, #555, #333); color: white; border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; font-size: 18px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.3); transition: all 0.2s ease;" title="Previous Root (, key)">‹</button>
                <div id="currentRootNode" style="display: inline-block; font-weight: bold; min-width: 40px; text-align: center; color: #fff; background: rgba(0,0,0,0.3); padding: 6px 12px; border-radius: 6px; border: 1px solid #666;">C</div>
                <button id="nextRootBtn" style="background: linear-gradient(145deg, #555, #333); color: white; border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; font-size: 18px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.3); transition: all 0.2s ease;" title="Next Root (. key)">›</button>
              </div>
              <div style="width: 1px; height: 30px; background: #666; min-width: 1px;"></div>
              <div style="display: flex; align-items: center; gap: 8px; min-width: 240px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                <p style="margin: 0; font-weight: bold; color: #fff;">Scale:</p>
                <button id="prevScaleBtn" style="background: linear-gradient(145deg, #555, #333); color: white; border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; font-size: 18px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.3); transition: all 0.2s ease;" title="Previous Scale (N key)">‹</button>
                <div id="currentScaleNode" style="display: inline-block; font-weight: bold; min-width: 100px; text-align: center; color: #fff; background: rgba(0,0,0,0.3); padding: 6px 12px; border-radius: 6px; border: 1px solid #666;">C Major</div>
                <button id="nextScaleBtn" style="background: linear-gradient(145deg, #555, #333); color: white; border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; font-size: 18px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.3); transition: all 0.2s ease;" title="Next Scale (M key)">›</button>
              </div>
            </div>
        </span>
        </span> </div>

      
      <!-- <div id="fretNotTab" class="tabcontent" style="display:block; max-height:1280px; overflow-y:auto;"> -->
        <div id ="fretNotPlaceholder">
          <p>This is a placeholder content. You can replace it with actual content later.</p>
          <p>Feel free to add more information or features as needed.</p>
        </div>
      <!-- </div> -->
  
<!--   
  <div class="selectionContainer" style="position:fixed; left:80px; bottom:0; width:100%; z-index:999; background:--theme-background;">
    <span style="width:5%;text-align: center;" class="tableCell">
      <div style="display: flex; align-items: center; height: 100%;">
        <h4 style="margin: 0;">Metronome</h4>
      </div>
    </span>
    <span style="width:7.5%" class="tableCell">
      <div style="display: flex; align-items: center; gap: 8px; height: 100%;">
        <span>Enable</span>
        <label class="switch" style="margin-bottom:0;">
          <input type="checkbox" id='metronomeCheckBox' checked>
          <span class="slider round"></span>
        </label>
      </div>
    </span>
  </span>
  <span style="width:7.5%" class="tableCell">
      <div style="display: flex; align-items: center; gap: 8px; height: 100%;">
        <span>Sound</span>
        <label class="switch" style="margin-bottom:0;">
          <input type="checkbox" id='metronomeSoundCheckBox'>
          <span class="slider round"></span>
        </label>
      </div>
</span>
<span style="width:10%" class="tableCell">
      <div style="display: flex; align-items: center; justify-content: center; height: 100%;">
        <span style="display: flex; align-items: center;">
          <span style="margin-right: 8px;">BPM:</span>
          <label id='bpmText' style="width:40px; text-align:center; margin-right: 8px;">120</label>
          <input type="range" id="bpmSlider" value="120" min="10" max="180" step="1" style="width:120px;">
        </span>
      </div>
</label>
</span>
<span style="width:60%" class="tableCell">
<span style="width:100%;justify-content:center; align-items:center;display:inline-block" class="tableCell" id ="metronomeContainer">
  <div style="display:flex;gap:-4px">
    <div class='metronome metronome01' data-animation></div>
    <div class='metronome metronome02' data-animation></div>
    <div class='metronome metronome03' data-animation></div>
    <div class='metronome metronome04' data-animation></div>
    <div class='metronome metronome05' data-animation></div>
    <div class='metronome metronome06' data-animation></div>
    <div class='metronome metronome07' data-animation></div>
    <div class='metronome metronome08' data-animation></div>
    <div class='metronome metronome09' data-animation></div>
    <div class='metronome metronome10' data-animation></div>
    <div class='metronome metronome11' data-animation></div>
    <div class='metronome metronome12' data-animation></div>
    <div class='metronome metronome13' data-animation></div>
    <div class='metronome metronome14' data-animation></div>
    <div class='metronome metronome15' data-animation></div>
    <div class='metronome metronome16' data-animation></div>
    <div class='metronome metronome17' data-animation></div>
    <div class='metronome metronome18' data-animation></div>
    <div class='metronome metronome19' data-animation></div>
    <div class='metronome metronome20' data-animation></div>
    <div class='metronome metronome21' data-animation></div>
    <div class='metronome metronome22' data-animation></div>
    <div class='metronome metronome23' data-animation></div>
    <div class='metronome metronome24' data-animation></div>
  </div>
</span>
</span>
</span>

    </div> -->

    <noscript>You need to enable JavaScript to run this app.</noscript>
    
    <!-- Root element for React theme management -->
    <!--      -->
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
  
<script>
  function openCity(evt, cityName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
  }

function reset_animation() {
    var el = document.getElementsByClassName('metronome');
    // console.log(el)
    Array.from(el).forEach((e) =>{
      // console.log(e.classList[1])
      // var e0 = document.getElementsByClassName(e.classList[1])[0];
      // console.log(e.style.background)
      e.style.animationName = 'none';
      e.offsetHeight; /* trigger reflow */
      e.style.animationName = null; 
    })
}
// Get the element with id="defaultOpen" and click on it
<!-- document.getElementById("defaultOpen").click(); -->

// Mobile layout reorganization function
function reorganizeForMobile() {
  if (window.innerWidth <= 768) {
    const fretNotPlaceholder = document.getElementById('fretNotPlaceholder');
    if (fretNotPlaceholder) {
      // Set initial layout styles
      fretNotPlaceholder.style.display = 'flex';
      fretNotPlaceholder.style.flexDirection = 'column';
      fretNotPlaceholder.style.gap = '10px';
      fretNotPlaceholder.style.height = 'calc(100vh - 60px)';
      fretNotPlaceholder.style.overflowY = 'auto';
      
      // Wait for content to be dynamically loaded
      const checkForContent = setInterval(() => {
        const chordGrid = document.getElementById('chordButtonGridContainer');
        const scaleControls = document.getElementById('scaleControlsContainer') || 
                             document.getElementById('placeholderContent');
        const fretboard = fretNotPlaceholder.querySelector('.fretboard');
        
        if (chordGrid || scaleControls || fretboard) {
          // Force reorganization with consistent priority order (chord grid first, scale controls second)
          if (chordGrid) {
            chordGrid.style.order = '1';
            chordGrid.style.width = '100%';
            chordGrid.style.maxWidth = '100%';
            chordGrid.style.flexShrink = '1';
            chordGrid.style.margin = '10px 0';
          }
          
          if (scaleControls) {
            scaleControls.style.order = '2';
            scaleControls.style.width = '100%';
            scaleControls.style.flexShrink = '1';
          }
          
          if (fretboard) {
            fretboard.style.order = '3';
            fretboard.style.flexShrink = '0';
            fretboard.style.height = window.innerWidth <= 768 ? '200px' : '250px';
            fretboard.style.width = '100%';
            fretboard.style.margin = '5px 0';
          }
          
          clearInterval(checkForContent);
        }
      }, 500);
      
      // Clear interval after 10 seconds to prevent infinite checking
      setTimeout(() => clearInterval(checkForContent), 10000);
    }
    
    // Optimize header layout for mobile
    const selectionContainer = document.querySelector('.selectionContainer');
    if (selectionContainer) {
      selectionContainer.style.display = 'flex';
      selectionContainer.style.flexDirection = 'row';
      selectionContainer.style.flexWrap = 'nowrap';
      selectionContainer.style.alignItems = 'center';
      selectionContainer.style.justifyContent = 'space-between';
      selectionContainer.style.maxHeight = '50px';
      selectionContainer.style.padding = '2px';
      
      const tableCells = selectionContainer.querySelectorAll('.tableCell');
      if (tableCells.length >= 3) {
        tableCells[0].style.width = '20%'; // unCAGED title
        tableCells[0].style.minWidth = '60px';
        tableCells[1].style.width = '15%'; // Help
        tableCells[1].style.minWidth = '40px';
        tableCells[2].style.width = '65%'; // Current Scale
        tableCells[2].style.textAlign = 'left';
      }
    }
  }
}

// Screen orientation management for mobile
function handleOrientationChange() {
  if (window.innerWidth <= 768) {
    // Force landscape on mobile devices
    if (screen.orientation && screen.orientation.lock) {
      screen.orientation.lock('landscape').catch(() => {
        // Fallback if orientation lock fails
        console.log('Could not lock screen orientation');
      });
    }
  }
}

// Initialize mobile optimizations
document.addEventListener('DOMContentLoaded', () => {
  reorganizeForMobile();
  handleOrientationChange();
});

// Handle window resize
window.addEventListener('resize', () => {
  reorganizeForMobile();
  handleOrientationChange();
});

// Handle orientation change
window.addEventListener('orientationchange', () => {
  setTimeout(() => {
    reorganizeForMobile();
    handleOrientationChange();
  }, 100);
});

// Mutation observer to handle dynamically added content
const observer = new MutationObserver((mutations) => {
  mutations.forEach((mutation) => {
    if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
      // Check if important elements were added
      mutation.addedNodes.forEach((node) => {
        if (node.nodeType === Node.ELEMENT_NODE) {
          if (node.id === 'chordButtonGridContainer' || 
              node.id === 'scaleControlsContainer' ||
              node.className && node.className.includes('fretboard')) {
            setTimeout(reorganizeForMobile, 100);
          }
        }
      });
    }
  });
});

// Start observing
const fretNotPlaceholder = document.getElementById('fretNotPlaceholder');
if (fretNotPlaceholder) {
  observer.observe(fretNotPlaceholder, {
    childList: true,
    subtree: true
  });
}
  </script>
</html>
